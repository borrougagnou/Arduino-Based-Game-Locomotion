Software Requirements:
  ----------------------
  -Arduino IDE 1.0
  -#include <GY6050.h>
  -#include <Wire.h>
  -#include <Servo.h>

  Hardware Requirements:
  ----------------------
  -Arduino
  -Pressure sensors
  -Gyroscope
  -Servo motors

  Project Requirents:
  -------------------
  • Game pad controller

*/


#include <GY6050.h>
#include <Wire.h>
#include <VarSpeedServo.h>

#define angle1 20
#define angle2 90

#define Sensor_BL A0
#define Sensor_BR A1

VarSpeedServo servo1;


GY6050 gyro1(0x68);
GY6050 gyro2(0x69);

int X = 0;
int Y = 0;

int y1_axis = 0;
int y2_axis = 0;

int sensorBL;
int sensorBR;

int speed = 0;
int angle = 0;

int prev_y1_axis = 0;
int y1_hold = 0;
unsigned long timer;
int start=1;

void setup() {
  Serial.begin(9600);
  Wire.begin();
  gyro1.initialisation();
  gyro2.initialisation();
  delay(100);
  servo1.attach(8);
  servo1.write(90);
}

void loop() {
  y1_axis = gyro1.refresh('A', 'Y');
  y2_axis = gyro2.refresh('A', 'Y');
  sensorBL = analogRead(Sensor_BL);
  sensorBR = analogRead(Sensor_BR);

  //0 right  - 90 centr - 180 left

  if (sensorBL > 10) {
    speed = map( sensorBL , 0 , 1023 , 0 , 255);
    if (sensorBL < 900) { //less pressure 90+20=110
      servo1.write(95 , speed);
    }
    else if (sensorBL > 900) { //more pressre 90+90 = 180
      servo1.write(105 , speed);
    }
  }
  else if (sensorBR > 10) {
    speed = map( sensorBR , 0 , 1023 , 0 , 255);
    if (sensorBR < 900) {
      servo1.write(95 , speed);
    }
    else if  (sensorBR > 900) {
      servo1.write(105 , speed);
    }
  }
  else if ((start == 0 || millis() - timer > 1000) && y1_axis > -30 && y1_axis < 20 && y2_axis > -30 && y2_axis < 20 && sensorBL < 10 && sensorBR < 10) //flat dead end no servo movement - center position -  can we separate on different lines the pressure sensor and accell so that I can set the dead end value separately for the press sens and acc ?
  {
    Serial.println("Servo goes to zero");
    start = 1;
    servo1.write( 85 , 15); //center speed = 0-255
  }
  else if ((y1_axis > -95 & y1_axis < -40) || (y2_axis > -95 & y2_axis < -40))
  {
    timer = millis();
    servo1.write(70 , 20);
    delay(100);
  }
  else if ((y1_axis < 95 & y1_axis > 40) || (y2_axis < 95 & y2_axis > 40))
  {
    timer = millis();
    servo1.write(78 , 20);
    delay(100);
  }



  Serial.println("y1: " + String(y1_axis) + " y2: " + String(y2_axis) + " L: " + String(sensorBL) + " R: " + String(sensorBR) + " SPeed: " + String(speed) + " Millis: " + String(millis()-timer));
  delay(100);
}